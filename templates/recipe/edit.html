{% extends 'base.html' %}

{% block title %}Edit Recipe {{ recipe.title }}{% endblock title %}

{% block content %}
{% load crispy_forms_tags %}

    <div class="container">
        <div class="card mt-5">
            <div>
                <h5 class="card-header">Editing: {{ recipe.title }}</h5>
            </div>
            <div class="d-flex flex-direction-row main-content">
                <div style="max-width:50%;" class="p-2">
                    <img src="{{ recipe.image.url }}" style="border: 1px solid #333; max-width:100%; max-height:100%;" alt="{{ recipe.title }}">
                    <div class="btn-group-vertical" style="width:100%;" >
                        <a class="btn btn-outline-primary m-2 rounded" href="{% url 'recipe_single' id=recipe.id %}">See the Clients View</a>
                        <a class="btn btn-outline-primary m-2 rounded" href="{% url 'create_ingredient' id=recipe.id %}">Add an Ingredient</a>
                        <a class="btn btn-outline-success m-2 rounded" href="{% url 'create_category' %}">Create a New Category</a>
                        <form style="width:100%;" action="{% url 'delete_recipe' id=recipe.id %}" method="delete">
                            {% csrf_token %}
                            <button style="width:100%;" class="btn btn-outline-danger m-2" type="submit" href="{% url 'delete_recipe' id=recipe.id %}">Remove {{ recipe.title }}</button>
                        </form>
                    </div>
                    <h3 class="p-2">Ingredients Added:</h3>
                    {% for ingredient in ingredients %}
                        <div class=" mt-2 p-2 border-top border-bottom">
                            <h3>{{ ingredient.name }}</h3>
                            <h6>From: {{ ingredient.country_of_origin }}</h6>
                            <p class="text-muted">{{ ingredient.weight }}{{ ingredient.unit_of_measurement.unit_shorthand }}</p>
                            <form action="{% url 'delete_recipe' id=recipe.id %}" method="delete">
                                {% csrf_token %}
                                <button class="btn btn-outline-danger" type="submit" href="{% url 'delete_ingredient' id=ingredient.id %}">Remove {{ ingredient.name }}</button>
                            </form>
                        </div>
                    {% endfor %}
                </div>
                {% load crispy_forms_tags %}
                <div style="width:100%;">
                    <form method="POST" class="form-group ml-3 mr-1 mt-1" enctype="multipart/form-data">
                        {% csrf_token %}
                        {{form|crispy}}
                        <button type="submit" style="width:100%;" class="btn btn-outline-success">Update Recipe</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock content %}